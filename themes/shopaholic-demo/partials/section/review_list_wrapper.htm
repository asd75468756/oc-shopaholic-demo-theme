{# @var obProduct \Lovata\Shopaholic\Classes\Item\ProductItem #}

<div class="uk-flex uk-flex-row">
    <div class="review_list_wrapper uk-width-expand">
        {% partial 'ajax/ajax_review_list' obProduct=obProduct %}
    </div>
    <div class="uk-width-2-5 uk-flex uk-padding uk-flex-column">
        <div class="commentary-create">
            <button class="uk-button uk-button-secondary uk-text-center" uk-toggle="target: #review-modal" type="button">Create review</button>
        </div>
        <div class="reviews-card uk-width-1-1">
            <h3>Reviews (count)</h3>
            <hr>
            <div class="average-mark uk-flex uk-flex-row">
                <h2 class="average-mark__mark uk-margin-remove-bottom uk-margin-right">0.0</h2>
                {% for i in 1..5 %}
                <span {% if iRating >= i - 0.5 %}class="uk-text-warning"{% endif %} uk-icon="icon: star; ratio: {{ ration|default(1.5) }}"></span>
                {% endfor %}
            </div>
            <div class="uk-flex uk-flex-column uk-margin-top">
                {% for i in 1..5 %}
                <div class="uk-flex uk-flex-row rating uk-margin-small-bottom">
                    <span class="rating-stars">
                        {% for i in 1..5 %}
                        <span {% if iRating >= i - 0.5 %}class="uk-text-warning"{% endif %} uk-icon="icon: star; ratio: {{ ration|default(0.8) }}"></span>
                        {% endfor %}
                    </span>
                    <span class="rating-marks-counts">100</span>
                    <progress class="uk-progress rating-progress uk-margin-remove"  value="10" max="100"></progress>
                </div>
                <div class="uk-flex uk-flex-row"></div>
                <div class="uk-flex uk-flex-row"></div>
                <div class="uk-flex uk-flex-row"></div>
                <div class="uk-flex uk-flex-row"></div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>

<div uk-modal id="review-modal">
    <div class="uk-modal-dialog uk-modal-body">
        <button class="uk-modal-close-outside" type="button" uk-close></button>
        <div class="uk-modal-header">
            <h2 class="uk-modal-title">Create review</h2>
        </div>
        <div class="uk-modal-body">
            <form class="create_review_form">
                <fieldset class="uk-fieldset">
                    <div class="uk-margin">
                        <input name="name" class="uk-input" type="text" placeholder="Andrey Kharanenka" required>
                    </div>
                    <div class="uk-margin">
                        <textarea name="comment" class="uk-textarea" rows="5" placeholder="My rating is" required></textarea>
                    </div>
                    <div class="uk-margin uk-grid-small uk-child-width-auto uk-grid">
                        {% for i in 1..5 %}
                            <label>
                                <input class="uk-radio" type="radio" name="rating" value="{{ i }}" {% if loop.last == true %}checked{% endif %}> {{ i }}
                            </label>
                        {% endfor %}
                    </div>
                    <input name="product_id" type="hidden" value="{{ obProduct.id }}">
                    <button type="submit" class="uk-button uk-button-secondary">Create</button>
                </fieldset>
            </form>
        </div>
    </div>
</div>